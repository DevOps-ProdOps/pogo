YUI.add("pogo-model-job",function(a){a.namespace("Pogo.Model").Job=a.Base.create("pogo-model-job",a.Model,[],{initializer:function(){this.after("logChange",this.calculateFinishTime,this);this.after("load",this.calculateFinishTime,this);this.calculateFinishTime();},calculateFinishTime:function(){var c=this.get("log"),b,d;if(c&&a.Lang.isArray(c)&&c.length){b=c[c.length-1].time;d=b-this.get("start_time");this.set("finish_time",b,{silent:true});this.set("duration",d,{silent:true});}},prepareJobURL:function(b,c,d){return a.Lang.sub(b,{root:a.Pogo.Env.WSRoot,callback:c,jobid:d||this.get("jobid")});},rangeSetter:function(c){if(!a.Lang.isArray(c)){try{c=a.JSON.parse(c);}catch(b){}}return a.Lang.isArray(c)?c:[];},sync:function(d,b,f){if(d==="read"){var e=function(g){if(g.response&&g.response.job&&a.Lang.isObject(g.response.job)){f(null,g.response.job);}else{f("Could not load job");}},c=function(){f("Could not load job");};a.jsonp(a.Pogo.Env.jobWS,{on:{success:e,failure:c,timeout:c},context:this,format:a.bind(this.prepareJobURL,this),timeout:2000});}else{f("Invalid Action");}},idAttribute:"jobid"},{ATTRS:{jobid:{value:""},user:{value:""},run_as:{value:""},posthook:{value:""},timeout:{value:""},prehook:{value:""},requesthost:{value:""},invoked_as:{value:""},namespace:{value:""},client:{value:""},retry:{value:""},job_timeout:{value:""},state:{value:""},start_time:{value:""},finish_time:{value:""},log:{value:[]},command:{value:""},range:{value:[],setter:"rangeSetter"},host_count:{value:""},job_status:{value:""},hosts:{value:[]},end_time:{value:""}}});},"@VERSION@",{requires:["base","model","pogo-env","json-parse","jsonp"]});